# you have to build this image from the WebKit's debian package source tree
# at the specific revision that you need to package
from debian:jessie

RUN apt-get update
RUN apt-get install -y git-core gdb epiphany-browser
RUN apt-get install -y build-essential fakeroot devscripts dpatch dh-make expect equivs
COPY debian/control /webkit/debian/control
# to install dependencies directly from the control file
#  source: <https://stackoverflow.com/questions/17435958/how-to-install-build-dependencies-directly-from-the-debian-control-file>
RUN mk-build-deps --install --tool='apt-get -o Debug::pkgProblemResolver=yes --no-install-recommends --yes' /webkit/debian/control
WORKDIR /hack/webkit-debian/

ENTRYPOINT DEB_BUILD_OPTIONS=debug debuild -b -uc -us -nc -j3

